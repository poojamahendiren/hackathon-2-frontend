{"ast":null,"code":"import axios from 'axios';\nimport { USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_DETAILS_RESET, USER_LOGIN_FAIL, USER_LOGIN_LOGOUT, USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_UPDATE_PROFILE_FAIL, USER_UPDATE_PROFILE_REQUEST, USER_UPDATE_PROFILE_SUCCESS, USER_LIST_REQUEST, USER_LIST_SUCCESS, USER_LIST_FAIL, USER_LIST_RESET, USER_DELETE_REQUEST, USER_DELETE_SUCCESS, USER_DELETE_FAIL, USER_UPDATE_REQUEST, USER_UPDATE_SUCCESS, USER_UPDATE_FAIL, USER_ADD_FAVORITE_REQUEST, USER_ADD_FAVORITE_SUCCESS, USER_ADD_FAVORITE_FAIL, USER_REMOVE_FAVORITE_REQUEST, USER_REMOVE_FAVORITE_SUCCESS, USER_REMOVE_FAVORITE_FAIL, USER_GET_FAVORITES_REQUEST, USER_GET_FAVORITES_SUCCESS, USER_GET_FAVORITES_FAIL } from '../constants/user-constants';\nimport { ORDER_GET_MY_ORDERS_RESET } from '../constants/order-constants';\nexport const login = (email, password) => async dispatch => {\n  try {\n    dispatch({\n      type: USER_LOGIN_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('/api/users/login', {\n      email,\n      password\n    }, config);\n    dispatch({\n      type: USER_LOGIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_LOGIN_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const logout = () => dispatch => {\n  localStorage.removeItem('userInfo');\n  dispatch({\n    type: USER_LOGIN_LOGOUT\n  });\n  dispatch({\n    type: USER_DETAILS_RESET\n  });\n  dispatch({\n    type: ORDER_GET_MY_ORDERS_RESET\n  });\n  dispatch({\n    type: USER_LIST_RESET\n  });\n};\nexport const register = (name, email, password) => async dispatch => {\n  try {\n    dispatch({\n      type: USER_REGISTER_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('/api/users', {\n      name,\n      email,\n      password\n    }, config);\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: USER_LOGIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const getUserDetails = id => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_DETAILS_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`/api/users/${id}`, config);\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const updateUserProfile = user => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_UPDATE_PROFILE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.put(`/api/users/profile`, user, config);\n    dispatch({\n      type: USER_UPDATE_PROFILE_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: USER_LOGIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_UPDATE_PROFILE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const listUsers = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_LIST_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`/api/users`, config);\n    dispatch({\n      type: USER_LIST_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_LIST_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const deleteUser = id => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_DELETE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    await axios.delete(`/api/users/${id}`, config);\n    dispatch({\n      type: USER_DELETE_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DELETE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const updateUser = user => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_UPDATE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.put(`/api/users/${user._id}`, user, config);\n    dispatch({\n      type: USER_UPDATE_SUCCESS\n    });\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_UPDATE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const addToFavorites = (product, userId) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_ADD_FAVORITE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post(`/api/users/${userId}/favorites`, {\n      productId: product._id,\n      name: product.name,\n      image: product.image,\n      price: product.price,\n      numReviews: product.numReviews,\n      rating: product.rating\n    }, config);\n    dispatch({\n      type: USER_ADD_FAVORITE_SUCCESS,\n      payload: data.favorites\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_ADD_FAVORITE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const removeFavorite = (productId, userId) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_REMOVE_FAVORITE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    await axios.delete(`/api/users/${userId}/favorites/${productId}`, config);\n    dispatch({\n      type: USER_REMOVE_FAVORITE_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_REMOVE_FAVORITE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const getFavorites = userId => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: USER_GET_FAVORITES_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`/api/users/${userId}/favorites`, config);\n    dispatch({\n      type: USER_GET_FAVORITES_SUCCESS,\n      payload: data.favorites\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_GET_FAVORITES_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/hp/Desktop/B38TAMIL/guvi-hackathon2-frontend-main/guvi-hackathon2-frontend-main/src/actions/user-actions.js"],"names":["axios","USER_DETAILS_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_RESET","USER_LOGIN_FAIL","USER_LOGIN_LOGOUT","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_UPDATE_PROFILE_FAIL","USER_UPDATE_PROFILE_REQUEST","USER_UPDATE_PROFILE_SUCCESS","USER_LIST_REQUEST","USER_LIST_SUCCESS","USER_LIST_FAIL","USER_LIST_RESET","USER_DELETE_REQUEST","USER_DELETE_SUCCESS","USER_DELETE_FAIL","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAIL","USER_ADD_FAVORITE_REQUEST","USER_ADD_FAVORITE_SUCCESS","USER_ADD_FAVORITE_FAIL","USER_REMOVE_FAVORITE_REQUEST","USER_REMOVE_FAVORITE_SUCCESS","USER_REMOVE_FAVORITE_FAIL","USER_GET_FAVORITES_REQUEST","USER_GET_FAVORITES_SUCCESS","USER_GET_FAVORITES_FAIL","ORDER_GET_MY_ORDERS_RESET","login","email","password","dispatch","type","config","headers","data","post","payload","localStorage","setItem","JSON","stringify","error","response","message","logout","removeItem","register","name","getUserDetails","id","getState","userLogin","userInfo","Authorization","token","get","updateUserProfile","user","put","listUsers","deleteUser","delete","updateUser","_id","addToFavorites","product","userId","productId","image","price","numReviews","rating","favorites","removeFavorite","getFavorites"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n\tUSER_DETAILS_FAIL,\n\tUSER_DETAILS_REQUEST,\n\tUSER_DETAILS_SUCCESS,\n\tUSER_DETAILS_RESET,\n\tUSER_LOGIN_FAIL,\n\tUSER_LOGIN_LOGOUT,\n\tUSER_LOGIN_REQUEST,\n\tUSER_LOGIN_SUCCESS,\n\tUSER_REGISTER_FAIL,\n\tUSER_REGISTER_REQUEST,\n\tUSER_REGISTER_SUCCESS,\n\tUSER_UPDATE_PROFILE_FAIL,\n\tUSER_UPDATE_PROFILE_REQUEST,\n\tUSER_UPDATE_PROFILE_SUCCESS,\n\tUSER_LIST_REQUEST,\n\tUSER_LIST_SUCCESS,\n\tUSER_LIST_FAIL,\n\tUSER_LIST_RESET,\n\tUSER_DELETE_REQUEST,\n\tUSER_DELETE_SUCCESS,\n\tUSER_DELETE_FAIL,\n\tUSER_UPDATE_REQUEST,\n\tUSER_UPDATE_SUCCESS,\n\tUSER_UPDATE_FAIL,\n\tUSER_ADD_FAVORITE_REQUEST,\n\tUSER_ADD_FAVORITE_SUCCESS,\n\tUSER_ADD_FAVORITE_FAIL,\n\tUSER_REMOVE_FAVORITE_REQUEST,\n\tUSER_REMOVE_FAVORITE_SUCCESS,\n\tUSER_REMOVE_FAVORITE_FAIL,\n\tUSER_GET_FAVORITES_REQUEST,\n\tUSER_GET_FAVORITES_SUCCESS,\n\tUSER_GET_FAVORITES_FAIL,\n} from '../constants/user-constants';\n\nimport { ORDER_GET_MY_ORDERS_RESET } from '../constants/order-constants';\n\nexport const login = (email, password) => async (dispatch) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_REQUEST,\n\t\t});\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.post(\n\t\t\t'/api/users/login',\n\t\t\t{ email, password },\n\t\t\tconfig\n\t\t);\n\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\n\t\tlocalStorage.setItem('userInfo', JSON.stringify(data));\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const logout = () => (dispatch) => {\n\tlocalStorage.removeItem('userInfo');\n\tdispatch({\n\t\ttype: USER_LOGIN_LOGOUT,\n\t});\n\tdispatch({\n\t\ttype: USER_DETAILS_RESET,\n\t});\n\tdispatch({\n\t\ttype: ORDER_GET_MY_ORDERS_RESET,\n\t});\n\tdispatch({\n\t\ttype: USER_LIST_RESET,\n\t});\n};\n\nexport const register = (name, email, password) => async (dispatch) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_REGISTER_REQUEST,\n\t\t});\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.post(\n\t\t\t'/api/users',\n\t\t\t{ name, email, password },\n\t\t\tconfig\n\t\t);\n\n\t\tdispatch({\n\t\t\ttype: USER_REGISTER_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\n\t\tlocalStorage.setItem('userInfo', JSON.stringify(data));\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_REGISTER_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const getUserDetails = (id) => async (dispatch, getState) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_DETAILS_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.get(`/api/users/${id}`, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_DETAILS_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_DETAILS_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const updateUserProfile = (user) => async (dispatch, getState) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_UPDATE_PROFILE_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.put(`/api/users/profile`, user, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_UPDATE_PROFILE_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\n\t\tlocalStorage.setItem('userInfo', JSON.stringify(data));\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_UPDATE_PROFILE_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const listUsers = () => async (dispatch, getState) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_LIST_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.get(`/api/users`, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_LIST_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_LIST_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const deleteUser = (id) => async (dispatch, getState) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_DELETE_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tawait axios.delete(`/api/users/${id}`, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_DELETE_SUCCESS,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_DELETE_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const updateUser = (user) => async (dispatch, getState) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_UPDATE_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.put(`/api/users/${user._id}`, user, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_UPDATE_SUCCESS,\n\t\t});\n\t\tdispatch({\n\t\t\ttype: USER_DETAILS_SUCCESS,\n\t\t\tpayload: data,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_UPDATE_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const addToFavorites = (product, userId) => async (\n\tdispatch,\n\tgetState\n) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_ADD_FAVORITE_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.post(\n\t\t\t`/api/users/${userId}/favorites`,\n\t\t\t{\n\t\t\t\tproductId: product._id,\n\t\t\t\tname: product.name,\n\t\t\t\timage: product.image,\n\t\t\t\tprice: product.price,\n\t\t\t\tnumReviews: product.numReviews,\n\t\t\t\trating: product.rating,\n\t\t\t},\n\t\t\tconfig\n\t\t);\n\n\t\tdispatch({\n\t\t\ttype: USER_ADD_FAVORITE_SUCCESS,\n\t\t\tpayload: data.favorites,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_ADD_FAVORITE_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const removeFavorite = (productId, userId) => async (\n\tdispatch,\n\tgetState\n) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_REMOVE_FAVORITE_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tawait axios.delete(`/api/users/${userId}/favorites/${productId}`, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_REMOVE_FAVORITE_SUCCESS,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_REMOVE_FAVORITE_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n\nexport const getFavorites = (userId) => async (dispatch, getState) => {\n\ttry {\n\t\tdispatch({\n\t\t\ttype: USER_GET_FAVORITES_REQUEST,\n\t\t});\n\n\t\tconst {\n\t\t\tuserLogin: { userInfo },\n\t\t} = getState();\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.get(`/api/users/${userId}/favorites`, config);\n\n\t\tdispatch({\n\t\t\ttype: USER_GET_FAVORITES_SUCCESS,\n\t\t\tpayload: data.favorites,\n\t\t});\n\t} catch (error) {\n\t\tdispatch({\n\t\t\ttype: USER_GET_FAVORITES_FAIL,\n\t\t\tpayload:\n\t\t\t\terror.response && error.response.data.message\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: error.message,\n\t\t});\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}